
Тестовое задание в компанию Эдванс
=====

Задание
-----

**Необходимо разработать систему учета личных финансов с использованием JMix**
*https://docs.google.com/document/d/1Dyuch4WS2GtbLP5p0IuBqY1sF9mH5d4nbDhY3PlbiOE/edit#*

Возможности приложения
------

- Создание и редактирование учётных записей клиентов (от имени администратора)
- Создание и редактирование своих счетов клиентами
- Создание и редактирование типов транзакций
- Создание и редактирование транзакций

Каждый клиент видит только свои данные (счета, транзакции и их типы). При редактировании или удалении транзакций
счета, задействованные в них, также изменяются в соответствии с новыми данными. При удалении счёта удаляются и
транзакции с ним связанные.

Сущности и их основные свойства, с которыми работает приложение:
------
```
Client extends User {
    String username;
    String email;
}

BankAccount {
    String name;
    long amount;
    User user;
}

TransactionType {
    String name;
    User user;
}

Transaction {
    BankAccount fromAccount;
    BankAccount toAccount;
    long transferAmount;
    LocalDate date;
    List<TransactionType> type;
}
    
```

Особенности реализации
------

Предполагаемая валюта в приложении - рубли, суммы хранятся в целочисленных переменных в копейках
во избежание потерь точности. Для корректного вывода на экран значений в рублях объекты, хранящие
денежные суммы, имеют вспомогательное поле `double rub`. Это поле не сохраняется в базе, но автоматически
обновляется перед выводом.

При создании транзакций проводятся следующие проверки:
    
- валидация полей to/fromAccount (Не равны одновременно `null`, не одинаковы) - ValidTransactionAccounts
- на счёте списания (при наличии) достаточно средств для осуществления транзакции


Возникшие проблемы, дальнейшие направления работы:
------
- При загрузке списка транзакций мне не удалось составить запрос JPQL, получающий только транзакции текущего пользователя.
Пока что получаю все транзакции и фильтрую их. Это может приводить к большой потере производительности, необходимо исправить в первую очередь. Здесь сильно облегчило бы жизнь включение поля CLIENT_ID в таблицу транзакций, однако по условию это не так.
- Автоматическое присвоение ролей (прав доступа) клиенту пока не работает, приходится вводить вручную через панель администратора
- Для отображения сумм в рублях, а не в копейках приходится вводить дополнительное transient-поле rub в объектах BankAccount и Transaction.
Желательно найти способ соединить представление в рублях (типа double) со значением в копейках (типа long)
